<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuia+ Login</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: #FFFFFF;
            color: #333;
            transition: all 0.3s ease;
            -webkit-font-smoothing: antialiased;
        }

        body.dark {
            background: #181818;
            color: #fff;
        }

        .hidden {
            display: none !important;
        }

        /* Toast Notifications */
        .toast-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
        }

        .toast {
            padding: 16px 20px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            box-shadow: 0 8px 32px rgba(0,0,0,0.3);
            transform: translateX(100%);
            animation: slideIn 0.3s ease forwards;
            display: flex;
            align-items: center;
            gap: 12px;
            position: relative;
            overflow: hidden;
        }

        .toast.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }

        .toast.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }

        .toast.info {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
        }

        .toast.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        .toast-icon {
            width: 24px;
            height: 24px;
            flex-shrink: 0;
        }

        .toast-content {
            flex: 1;
            font-size: 14px;
            line-height: 1.4;
        }

        .toast-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            opacity: 0.8;
            transition: opacity 0.2s;
        }

        .toast-close:hover {
            opacity: 1;
        }

        .toast-progress {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 3px;
            background: rgba(255,255,255,0.3);
            animation: progress 4s linear forwards;
        }

        @keyframes slideIn {
            to { transform: translateX(0); }
        }

        @keyframes slideOut {
            to { transform: translateX(100%); }
        }

        @keyframes progress {
            from { width: 100%; }
            to { width: 0%; }
        }

        /* Welcome Screen */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.8) 0%, rgba(118, 75, 162, 0.8) 100%), 
                        url('https://files.fm/thumb_show.php?i=tmdgecb7j9') center/cover;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            color: white;
            text-align: center;
            padding: 20px;
        }

        .welcome-content h1 {
            font-size: 5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-weight: 800;
        }

        .welcome-content .tagline {
            font-size: 1.8rem;
            margin-bottom: 3rem;
            opacity: 0.9;
            max-width: 600px;
            font-weight: 300;
        }

        .welcome-content .description {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            opacity: 0.8;
            max-width: 500px;
            line-height: 1.5;
        }

        .btn-continue {
            background: white;
            color: #667eea;
            padding: 18px 45px;
            border: none;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }

        .btn-continue:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.3);
            background: #f8f9ff;
        }

        .terms-link {
            color: rgba(255,255,255,0.8);
            text-decoration: underline;
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Modal */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
        }

        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 15px;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        body.dark .modal-content {
            background: #2a2a2a;
            color: white;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 15px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        /* Main Container */
        .container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        }

        body.dark .container {
            background: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
        }

        /* Form Container */
        .form-container {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 15px 50px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 450px;
            backdrop-filter: blur(10px);
        }

        body.dark .form-container {
            background: #2a2a2a;
            box-shadow: 0 15px 50px rgba(0,0,0,0.3);
        }

        .form-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .form-header h1 {
            color: #667eea;
            font-size: 3rem;
            margin-bottom: 0.5rem;
            font-weight: 800;
        }

        .form-header p {
            color: #666;
            font-size: 1.1rem;
            font-weight: 500;
        }

        body.dark .form-header p {
            color: #ccc;
        }

        .form-header .subtitle {
            font-size: 0.9rem;
            color: #999;
            margin-top: 5px;
        }

        /* Forms */
        form {
            display: none;
            flex-direction: column;
            gap: 20px;
        }

        form.active {
            display: flex;
        }

        label {
            font-weight: 600;
            color: #667eea;
            margin-bottom: 8px;
            display: block;
            font-size: 0.95rem;
        }

        input[type="text"], input[type="email"], input[type="password"] {
            width: 100%;
            padding: 16px;
            font-size: 16px;
            border: 2px solid #e1e5e9;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        body.dark input[type="text"], 
        body.dark input[type="email"], 
        body.dark input[type="password"] {
            background: #1a1a1a;
            border-color: #444;
            color: white;
        }

        input:focus {
            outline: none;
            border-color: #667eea;
            background: #fff;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        body.dark input:focus {
            background: #2a2a2a;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);
        }

        /* Photo Upload */
        .photo-upload {
            text-align: center;
            margin-bottom: 1.5rem;
        }

        .photo-preview {
            width: 110px;
            height: 110px;
            border-radius: 50%;
            background: linear-gradient(135deg, #f0f2f5, #e4e7ea);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            position: relative;
            overflow: hidden;
            border: 4px solid #667eea;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .photo-preview:hover {
            transform: scale(1.05);
            border-color: #5a67d8;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        body.dark .photo-preview {
            background: linear-gradient(135deg, #444, #555);
        }

        .photo-preview img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-preview svg {
            width: 45px;
            height: 45px;
            color: #999;
        }

        .photo-input {
            display: none;
        }

        .photo-label {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-block;
        }

        .photo-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.4);
        }

        /* Buttons */
        .submit-btn {
            position: relative;
            overflow: hidden;
            cursor: pointer;
            padding: 16px 0;
            font-weight: 700;
            font-size: 1.1rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            border: none;
            border-radius: 12px;
            color: white;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: default;
        }

        .submit-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .spinner {
            position: absolute;
            left: 16px;
            top: 50%;
            margin-top: -10px;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .ripple {
            position: absolute;
            border-radius: 50%;
            transform: scale(0);
            animation: ripple-effect 0.6s linear;
            background: rgba(255, 255, 255, 0.5);
            pointer-events: none;
        }

        @keyframes ripple-effect {
            to {
                transform: scale(4);
                opacity: 0;
            }
        }

        /* Toggle Link */
        .toggle-link {
            margin-top: 2rem;
            cursor: pointer;
            text-align: center;
            color: #667eea;
            font-weight: 600;
            text-decoration: underline;
            transition: color 0.3s ease;
        }

        .toggle-link:hover {
            color: #5a67d8;
        }

        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 5000;
            color: white;
            text-align: center;
        }

        .loading-spinner {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(255,255,255,0.3);
            border-top: 5px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 30px;
        }

        .loading-text {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .loading-subtitle {
            font-size: 1rem;
            opacity: 0.8;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .welcome-content h1 {
                font-size: 3.5rem;
            }

            .welcome-content .tagline {
                font-size: 1.4rem;
            }

            .welcome-content .description {
                font-size: 1rem;
            }

            .form-container {
                padding: 30px 25px;
                border-radius: 15px;
            }

            .form-header h1 {
                font-size: 2.5rem;
            }

            .toast-container {
                right: 10px;
                left: 10px;
                max-width: none;
            }
        }
    /* Botão de ativação */
  #btn-termos-kuia {
    background: #fff;
    color: #6a0dad;
    padding: 5px 2px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-size: 16px;
    margin: 20px;
    transition: background 0.3s ease;
  }
  #btn-termos-kuia:hover {
      color:#fff;
    background: linear-gradient(135deg, #5a0099, #8a3bb8);
  }

  /* Overlay */
  #overlay-termos-kuia {
    display: none;
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    background: rgba(60, 0, 90, 0.85);
    z-index: 9999;
    justify-content: center;
    align-items: center;
    animation: fadeIn 0.3s ease forwards;
  }

  /* Conteúdo */
  #overlay-content-kuia {
    background: #fff;
    color: #333;
    max-width: 90%;
    max-height: 80%;
    overflow-y: auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 0 20px rgba(0,0,0,0.3);
    animation: slideUp 0.4s ease forwards;
  }

  #overlay-content-kuia h2 {
    color: #6a0dad;
    margin-top: 0;
  }

  #overlay-content-kuia h3 {
    color: #6a0dad;
    margin-bottom: 5px;
  }

  #overlay-content-kuia p {
    margin-bottom: 15px;
    line-height: 1.5;
  }

  /* Botão fechar */
  #fechar-termos-kuia {
    background: #6a0dad;
    color: #fff;
    border: none;
    padding: 8px 14px;
    border-radius: 5px;
    cursor: pointer;
    float: right;
    margin-top: -10px;
    margin-right: -10px;
  }
  #fechar-termos-kuia:hover {
    background: #5a0099;
  }

  /* Animações */
  @keyframes fadeIn {
    from {opacity: 0;}
    to {opacity: 1;}
  }
  @keyframes slideUp {
    from {transform: translateY(30px); opacity: 0;}
    to {transform: translateY(0); opacity: 1;}
  }
    </style>
</head>
<body>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen hidden">
        <div class="loading-spinner"></div>
        <div class="loading-text">Entrando no Kuia+</div>
        <div class="loading-subtitle">Sua rede social está carregando...</div>
    </div>

    <!-- Welcome Screen -->
    <div id="welcomeScreen" class="welcome-screen hidden">
        <div class="welcome-content">
            <h1>Kuia+</h1>
            <div class="tagline">Sua Rede Social</div>
            <div class="description">
                Conecte-se com amigos, compartilhe momentos e descubra novas experiências na sua rede social favorita.
            </div>
            <button id="continueBtn" class="btn-continue">Começar</button>
           <p class="terms-text">
                Antes de continuar, leia os <br>
                <span id="termsBtn" class="terms-link">Termos e Condições</span>
            </p>  </div>
    </div>

    <!-- Terms Modal -->
    <div id="termsModal" class="modal hidden">
        <div style="display:none;" class="modal-content">
            <button id="closeTermsBtn" class="close-btn">&times;</button>
            <h2>Termos de Uso - Kuia+</h2>
            <div style="margin-top: 20px; line-height: 1.6;">
              <p><strong>Bem-vindo ao Kuia+!</strong></p>
<p>Ao usar nossa plataforma, você concorda com os seguintes termos:</p>

<h4 style="margin: 20px 0 10px 0;">1. Responsabilidade do Usuário</h4>
<p>Você é responsável por todas as ações realizadas no aplicativo. O uso diário pode gerar recompensas. Ao convidar um novo usuário, ambos podem receber 50 Kz, desde que o convite seja aprovado pela equipe Kuia+ após análise de elegibilidade.</p>

<h4 style="margin: 20px 0 10px 0;">2. Recompensas por Atividade</h4>
<p>Usuários ativos -- que publicam, reagem, comentam e interagem com anúncios -- podem receber até 500 Kz por dia, conforme critérios internos de avaliação.</p>

<h4 style="margin: 20px 0 10px 0;">3. Levantamentos</h4>
<p>Todos os pedidos de levantamento passam por análise da equipe Kuia+. Apenas usuários ativos e qualificados recebem pagamento. A plataforma retém 20% do valor solicitado. Caso o valor total não esteja disponível, a equipe pagará o montante possível, sem prejuízo da retenção prevista.</p>

<h4 style="margin: 20px 0 10px 0;">4. Publicações e Denúncias</h4>
<p>Se uma publicação receber mais de 5 denúncias, ela poderá ser removida automaticamente.</p>

<h4 style="margin: 20px 0 10px 0;">5. Privacidade e Segurança</h4>
<p>Seus dados são protegidos e nem mesmo a equipe Kuia+ tem acesso direto a eles. Você pode definir senha para proteger seu estado e mensagens. Apenas os participantes da conversa têm acesso ao conteúdo.</p>

<h4 style="margin: 20px 0 10px 0;">6. Transferências</h4>
<p>É possível transferir valores para outros usuários, respeitando os limites e permissões de cada conta.</p>

<h4 style="margin: 20px 0 10px 0;">7. Garantias</h4>
<p>O Kuia+ garante recompensas pelo uso contínuo da plataforma, conforme tempo e atividades realizadas.</p>          

 <h4 style="margin: 20px 0 10px 0;">4. Conteúdo</h4>
                <p>Você é responsável pelo conteúdo que compartilha. Respeite direitos autorais e privacidade.</p>
                
                <div style="margin-top: 30px; text-align: center;">
                    <button id="acceptTermsBtn" class="submit-btn">Aceitar Termos</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App Container -->
    <div id="mainApp" class="container">
        <div class="form-container">
            <!-- Header -->
            <div class="form-header">
                <h1>Kuia+</h1>
                <p>Entre na sua rede social</p>
                <div class="subtitle">Conecte-se com seus amigos</div>
            </div>

            <!-- Login Form -->
            <form id="formLogin" class="active" autocomplete="off" novalidate>
                <label for="loginEmail">Email</label>
                <input type="email" id="loginEmail" name="email" placeholder="seu@email.com" autocomplete="username" required />
                
                <label for="loginPassword">Senha</label>
                <input type="password" id="loginPassword" name="password" placeholder="••••••" minlength="6" autocomplete="current-password" required />
                
                <button type="submit" class="submit-btn">Entrar no Kuia+</button>
                
            </form>

            <!-- Register Form -->
            <form id="formCreate" autocomplete="off" novalidate>
                <!-- Photo Upload -->
                <div class="photo-upload">
                    <div id="photoPreview" class="photo-preview" onclick="document.getElementById('photoInput').click()">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                        </svg>
                    </div>
                    <label for="photoInput" class="photo-label"> Adicionar Foto de Perfil</label>
                    <input type="file" id="photoInput" class="photo-input" accept="image/*">
                </div>

                <label for="createName">Nome Completo</label>
                <input type="text" id="createName" name="name" placeholder="Seu nome completo" required autocomplete="name" />
                
                <label for="createEmail">Email</label>
                <input type="email" id="createEmail" name="email" placeholder="seu@email.com" autocomplete="username" required />
                
                <label for="createPassword">Senha</label>
                <input type="password" id="createPassword" name="password" placeholder="Crie uma senha (mín 6 caracteres)" minlength="6" autocomplete="new-password" required />
                
                <button type="submit" class="submit-btn">Criar Conta no Kuia+</button>
            </form>

            <div id="toggleLink" class="toggle-link" tabindex="0" role="button">
                Criar nova conta
            </div>
           <div class="toggle-link" tabindex="0" role="button"
     style="margin-top:10px; cursor:pointer; color:#000; text-align:center;"
     onclick="window.location.href='senha.html'">
    Esqueci minha senha
</div>

            <!-- MELHORIA 1: Botão para acessar políticas na tela de login -->
            <div id="politicasLoginBtn" class="toggle-link" tabindex="0" role="button"
                 style="margin-top:10px; cursor:pointer; color:#667eea; text-align:center;">
                Termos e Políticas
            </div>
          
        </div>
    </div>

<div style="display:none;"  id="overlay-termos-kuia">
  <div id="overlay-content-kuia">
    <button id="fechar-termos-kuia">X</button>
    <h2>Termos de Uso -- Kuia+</h2>
    <p><strong>Última atualização:</strong> 15/09/2025</p>

    <h3>1. Definições e Escopo</h3>
    <p>O Kuia+ é uma rede social operada pelo Sibem César e a equipe Kuia+ Comunity, destinada a usuários que desejam interagir, publicar conteúdo e participar de campanhas promocionais. Estes termos se aplicam a todos os usuários, visitantes e anunciantes que utilizam a plataforma.</p>

    <h3>2. Idade Mínima e Elegibilidade</h3>
    <p>Para criar uma conta, o usuário deve ter pelo menos 18 anos ou a idade mínima exigida pela legislação local. Menores de idade só poderão utilizar a plataforma com autorização e supervisão de um responsável legal.</p>

    <h3>3. Responsabilidade do Usuário</h3>
    <p>Você é responsável por todas as ações realizadas na sua conta. O uso diário pode gerar recompensas. Ao convidar um novo usuário, ambos podem receber 50 Kz, desde que o convite seja aprovado pela equipe Kuia+ após análise de elegibilidade.</p>

    <h3>4. Recompensas por Atividade</h3>
    <p>Usuários ativos -- que publicam, reagem, comentam e interagem com anúncios -- podem receber até 500 Kz por dia, conforme critérios internos de avaliação.</p>

    <h3>5. Levantamentos</h3>
    <p>Todos os pedidos de levantamento passam por análise da equipe Kuia+. Apenas usuários ativos e qualificados recebem pagamento. A plataforma só é obrigada a pagar 20% do valor. Caso o valor total não esteja disponível, a equipe pagará o montante possível, sem prejuízo da retenção prevista.</p>

    <h3>6. Uso Proibido</h3>
    <p>É proibido publicar conteúdo ilegal, ofensivo ou que viole direitos de terceiros; utilizar bots, scripts automatizados ou práticas fraudulentas; enviar spam ou mensagens não solicitadas.</p>

    <h3>7. Publicações e Denúncias</h3>
    <p>Se uma publicação receber mais de 5 denúncias, ela poderá ser removida automaticamente.</p>

    <h3>8. Privacidade e Segurança</h3>
    <p>Seus dados são protegidos e nem mesmo a equipe Kuia+ tem acesso direto a eles. Você pode definir senha para proteger seu estado e mensagens. Apenas os participantes da conversa têm acesso ao conteúdo.</p>

    <h3>9. Transferências</h3>
    <p>É possível transferir valores para outros usuários, respeitando os limites e permissões de cada conta.</p>

    <h3>10. Propriedade Intelectual</h3>
    <p>Todo o conteúdo, marca, logotipo e layout do Kuia+ são protegidos por direitos autorais e de propriedade intelectual. É proibida a reprodução sem autorização.</p>

    <h3>11. Garantias</h3>
    <p>O Kuia+ garante recompensas pelo uso contínuo da plataforma, conforme tempo e atividades realizadas, mas não garante ganhos fixos ou permanentes.</p>

    <h3>12. Alterações nos Termos</h3>
    <p>O Kuia+ poderá alterar estes termos a qualquer momento. Mudanças relevantes serão comunicadas por meio da plataforma ou outros canais oficiais.</p>

    <h3>13. Rescisão de Conta</h3>
    <p>O Kuia+ poderá suspender ou encerrar contas que violem estes termos ou a legislação vigente.</p>

    <h3>14. Limitação de Responsabilidade</h3>
    <p>O Kuia+ não se responsabiliza por perdas indiretas, interrupções de serviço ou danos causados por terceiros.</p>

    <h3>15. Lei Aplicável e Foro</h3>
    <p>Estes termos são regidos pelas leis de Angola. Fica eleito o foro da comarca de benguela, para dirimir quaisquer controvérsias.</p>

    <h3>16. Contato</h3>
    <p>Para dúvidas, denúncias ou solicitações, entre em contato pelo e-mail: <strong>suporte@kuia+.ao</strong></p>
  </div>
</div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-app.js";
        import {
            getAuth,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword,
            updateProfile,
            signOut,
            onAuthStateChanged,
        } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-auth.js";
        import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/12.0.0/firebase-database.js";

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCE_vGty5XsV1YqdCi49Ck2xJDSFq284wc",
            authDomain: "cliente-movicel.firebaseapp.com",
            databaseURL: "https://cliente-movicel-default-rtdb.firebaseio.com",
            projectId: "cliente-movicel",
            storageBucket: "cliente-movicel.firebasestorage.app",
            messagingSenderId: "215414688375",
            appId: "1:215414688375:web:2c7d20a0c03c4c0fcfd472",
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const database = getDatabase(app);

        // Constants
        const API_KEY_IMGBB = 'e073e02267a1f0259cd69c562e780659';

        // DOM Elements
        const welcomeScreen = document.getElementById("welcomeScreen");
        const mainApp = document.getElementById("mainApp");
        const loadingScreen = document.getElementById("loadingScreen");
        const continueBtn = document.getElementById("continueBtn");
        const termsBtn = document.getElementById("termsBtn");
        const termsModal = document.getElementById("termsModal");
        const closeTermsBtn = document.getElementById("closeTermsBtn");
        const acceptTermsBtn = document.getElementById("acceptTermsBtn");
        const formLogin = document.getElementById("formLogin");
        const formCreate = document.getElementById("formCreate");
        const toggleLink = document.getElementById("toggleLink");
        const photoInput = document.getElementById("photoInput");
        const photoPreview = document.getElementById("photoPreview");
        const toastContainer = document.getElementById("toastContainer");
        
        // MELHORIA 1: DOM Element para botão de políticas na tela de login
        const politicasLoginBtn = document.getElementById("politicasLoginBtn");

        let currentForm = "login";
        let selectedPhoto = null;
        let isRedirecting = false;
        let acaoBotaoCalled = false;
        let resetLoginCalled = false;

        // Toast System
        function showToast(message, type = 'info', duration = 4000) {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            
            const icons = {
                success: `<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>`,
                error: `<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                </svg>`,
                warning: `<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L4.082 16.5c-.77.833.192 2.5 1.732 2.5z"></path>
                </svg>`,
                info: `<svg class="toast-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>`
            };

            toast.innerHTML = `
                ${icons[type]}
                <div class="toast-content">${message}</div>
                <button class="toast-close" onclick="removeToast(this.parentElement)">
                    <svg width="16" height="16" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                    </svg>
                </button>
                <div class="toast-progress"></div>
            `;

            toastContainer.appendChild(toast);

            // Auto remove
            setTimeout(() => {
                removeToast(toast);
            }, duration);

            return toast;
        }

        function removeToast(toast) {
            if (toast && toast.parentElement) {
                toast.style.animation = 'slideOut 0.3s ease forwards';
                setTimeout(() => {
                    if (toast.parentElement) {
                        toast.remove();
                    }
                }, 300);
            }
        }

        // Make removeToast global for onclick
        window.removeToast = removeToast;

        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark');
        }

        // Initialize app
        function initApp() {
            const hasSeenWelcome = localStorage.getItem('vizin_hasSeenWelcome');
            
            if (!hasSeenWelcome) {
                welcomeScreen.classList.remove('hidden');
                mainApp.style.display = 'none';
            } else {
                welcomeScreen.classList.add('hidden');
                mainApp.style.display = 'flex';
            }
        }

        // Welcome screen handlers
        continueBtn.addEventListener('click', () => {
            localStorage.setItem('vizin_hasSeenWelcome', 'true');
            welcomeScreen.classList.add('hidden');
            mainApp.style.display = 'flex';
        });

        termsBtn.addEventListener('click', () => {
            termsModal.classList.remove('hidden');
        });

        closeTermsBtn.addEventListener('click', () => {
            termsModal.classList.add('hidden');
        });

        acceptTermsBtn.addEventListener('click', () => {
            termsModal.classList.add('hidden');
            showToast('Termos aceitos! Bem-vindo ao Kuia+', 'success');
        });

        // MELHORIA 1: Event listener para botão de políticas na tela de login
        politicasLoginBtn.addEventListener('click', () => {
            document.getElementById('overlay-termos-kuia').style.display = 'flex';
        });

        // Form switching
        function showForm(name) {
            currentForm = name;
            if (name === "login") {
                formLogin.classList.add("active");
                formCreate.classList.remove("active");
                toggleLink.textContent = "Criar nova conta";
            } else {
                formCreate.classList.add("active");
                formLogin.classList.remove("active");
                toggleLink.textContent = "Já tenho conta";
            }
        }

        toggleLink.addEventListener("click", () => {
            if (currentForm === "login") {
                showForm("create");
            } else {
                showForm("login");
            }
        });

        // Photo upload handler
        photoInput.addEventListener('change', async (e) => {
            const file = e.target.files[0];
            if (file) {
                // Validate file size
                if (file.size > 5 * 1024 * 1024) {
                    showToast('Arquivo muito grande! Máximo 5MB.', 'error');
                    return;
                }

                // Validate file type
                if (!file.type.startsWith('image/')) {
                    showToast('Selecione apenas arquivos de imagem.', 'error');
                    return;
                }

                selectedPhoto = file;
                
                // Show preview
                const reader = new FileReader();
                reader.onload = (e) => {
                    photoPreview.innerHTML = `<img src="${e.target.result}" alt="Preview">`;
                };
                reader.readAsDataURL(file);

                showToast('Foto selecionada! 📸', 'success');
            }
        });

        // Upload image to ImgBB
        async function uploadImage(file) {
            try {
                const formData = new FormData();
                formData.append('image', file);

                const response = await fetch(`https://api.imgbb.com/1/upload?key=${API_KEY_IMGBB}`, {
                    method: 'POST',
                    body: formData
                });
                
                if (!response.ok) {
                    throw new Error(`Erro HTTP: ${response.status}`);
                }
                
                const data = await response.json();
                if (data.success) {
                    return data.data.url;
                } else {
                    throw new Error(data.error?.message || 'Falha no upload');
                }
            } catch (error) {
                console.error('Error uploading image:', error);
                showToast(`Erro ao enviar foto: ${error.message}`, 'error');
                return null;
            }
        }

        // Firebase error messages
        function getFirebaseErrorMessage(code) {
            const errorMessages = {
                'auth/invalid-email': 'Email inválido. Verifique o formato.',
                'auth/user-disabled': 'Conta desativada. Contate o suporte.',
                'auth/user-not-found': 'Usuário não encontrado. Verifique o email.',
                'auth/wrong-password': 'Senha incorreta. Tente novamente.',
                'auth/email-already-in-use': 'Email já está em uso. Tente fazer login.',
                'auth/weak-password': 'Senha muito fraca. Use pelo menos 6 caracteres.',
                'auth/too-many-requests': 'Muitas tentativas. Aguarde alguns minutos.',
                'auth/network-request-failed': 'Erro de conexão. Verifique sua internet.',
                'auth/invalid-credential': 'Credenciais inválidas. Verifique email e senha.',
            };

            return errorMessages[code] || `Erro: ${code}. Contate o suporte.`;
        }

        // Loading feedback
        function setLoading(button, loading) {
            if (loading) {
                button.disabled = true;
                button.setAttribute("data-text", button.textContent);
                button.textContent = "Processando...";
                const spinner = document.createElement("span");
                spinner.className = "spinner";
                button.appendChild(spinner);
            } else {
                button.disabled = false;
                button.textContent = button.getAttribute("data-text") || "Enviar";
                const spinner = button.querySelector(".spinner");
                if (spinner) spinner.remove();
            }
        }

        // Save user data to Firebase Database
        async function saveUserToDatabase(user, userData) {
            try {
                const userRef = ref(database, `vizin-users/${user.uid}`);
                const dataToSave = {
                    ...userData,
                    uid: user.uid,
                    email: user.email,
                    createdAt: new Date().toISOString(),
                    lastLogin: new Date().toISOString(),
                    platform: 'vizin-plus',
                    source: 'web-app'
                };
                
                await set(userRef, dataToSave);
                return true;
            } catch (error) {
                console.error('Error saving to Firebase Database:', error);
                return false;
            }
        }

        // Redirect to Vizin+ Social Network
        function redirectToVizin() {
            if (isRedirecting) return;
            isRedirecting = true;

            // Comunicar com Android baseado na conta ativa
            try {
                if (typeof Android !== 'undefined' && Android.restartApp) {
                    Android.restartApp();
                    console.log('✅ Android.restartApp() chamado - redirecionando para rede social');
                }
            } catch (error) {
                console.warn('⚠️ Android.restartApp() não disponível:', error);
            }

            try {
                if (typeof AndroidBridge7 !== 'undefined' && AndroidBridge7.acaoBotao) {
                    AndroidBridge7.acaoBotao();
                    console.log('✅ AndroidBridge7.acaoBotao() ativado - conta ativa detectada!');
                }
            } catch (error) {
                console.warn('⚠️ AndroidBridge7 não disponível:', error);
            }

            // Show loading screen
            loadingScreen.classList.remove('hidden');
            
            // Redirect to socilaiza1.html
            setTimeout(() => {
                window.location.href = '#';
            }, 2000);
        }

        // Login form handler
        formLogin.addEventListener("submit", async e => {
            e.preventDefault();

            const btn = formLogin.querySelector("button.submit-btn");
            setLoading(btn, true);

            const email = formLogin.email.value.trim();
            const password = formLogin.password.value;

            // Basic validation
            if (!email || !password) {
                setLoading(btn, false);
                showToast('Preencha todos os campos.', 'error');
                return;
            }

            try {
                const userCredential = await signInWithEmailAndPassword(auth, email, password);
                
                // Save login data to localStorage
                const userData = {
                    email: email,
                    loginTime: new Date().toISOString(),
                    type: 'login',
                    uid: userCredential.user.uid,
                    platform: 'vizin-plus'
                };
                localStorage.setItem('vizin_userData', JSON.stringify(userData));
                
                // Save login to database
                await saveUserToDatabase(userCredential.user, { type: 'login' });
                
                setLoading(btn, false);
                showToast('Login realizado com sucesso! 🎉', 'success');
                
                // Redirect to Vizin+
                setTimeout(() => {
                    redirectToVizin();
                }, 1000);
                
            } catch (error) {
                setLoading(btn, false);
                console.error('Login error:', error);
                const errorMessage = getFirebaseErrorMessage(error.code);
                showToast(errorMessage, 'error');
            }
        });

        // Register form handler
        formCreate.addEventListener("submit", async e => {
            e.preventDefault();

            const btn = formCreate.querySelector("button.submit-btn");
            setLoading(btn, true);

            const name = formCreate.name.value.trim();
            const email = formCreate.email.value.trim();
            const password = formCreate.password.value;

            // Validation
            if (!name || !email || !password) {
                setLoading(btn, false);
                showToast('Preencha todos os campos.', 'error');
                return;
            }

            if (password.length < 6) {
                setLoading(btn, false);
                showToast('Senha deve ter pelo menos 6 caracteres.', 'error');
                return;
            }

            try {
                let photoUrl = null;
                
                // Upload photo if selected
                if (selectedPhoto) {
                    showToast('Enviando foto do perfil...', 'info');
                    photoUrl = await uploadImage(selectedPhoto);
                    if (!photoUrl) {
                        setLoading(btn, false);
                        showToast('Erro ao enviar foto. Tente novamente.', 'error');
                        return;
                    }
                }

                // Create user account
                const userCredential = await createUserWithEmailAndPassword(auth, email, password);
                
                // Update user profile with name and photo (CRUCIAL for avatar)
                await updateProfile(userCredential.user, { 
                    displayName: name,
                    photoURL: photoUrl // This photo will appear everywhere!
                });

                // Save additional data to Database
                const userData = {
                    name: name,
                    photoUrl: photoUrl,
                    type: 'register',
                    profileUpdated: true,
                    platform: 'vizin-plus'
                };
                
                await saveUserToDatabase(userCredential.user, userData);
                
                // MELHORIA 2: Salvar nome e avatar especificamente no localStorage
                const userProfileData = {
                    name: name,
                    displayName: name,
                    avatar: photoUrl,
                    photoURL: photoUrl,
                    email: email,
                    uid: userCredential.user.uid,
                    type: 'register',
                    createdAt: new Date().toISOString(),
                    platform: 'kuia-plus',
                    profileComplete: true
                };
                
                // Salvar dados do perfil para carregamento rápido
                localStorage.setItem('kuia_userProfile', JSON.stringify(userProfileData));
                localStorage.setItem('vizin_userData', JSON.stringify(userProfileData));
                
                console.log('✅ Dados do perfil salvos no localStorage:', userProfileData);

                setLoading(btn, false);
                showToast('Conta criada com sucesso! Reiniciando app...', 'success');
                
                // CRÍTICO: Chamar Android.restartApp() imediatamente
                console.log('🔄 Tentando chamar Android.restartApp()...');
                
                // Tentar múltiplas formas de chamar a função Android
                let restartExecuted = false;
                
                // Método 1: Android.restartApp()
                try {
                    if (typeof Android !== 'undefined' && Android.restartApp) {
                        console.log('✅ Método 1: Android.restartApp() encontrado!');
                        Android.restartApp();
                        restartExecuted = true;
                        console.log('🚀 Android.restartApp() EXECUTADO COM SUCESSO!');
                    }
                } catch (error) {
                    console.error('❌ Método 1 falhou:', error);
                }
                
                // Método 2: window.Android.restartApp()
                if (!restartExecuted) {
                    try {
                        if (typeof window.Android !== 'undefined' && window.Android.restartApp) {
                            console.log('✅ Método 2: window.Android.restartApp() encontrado!');
                            window.Android.restartApp();
                            restartExecuted = true;
                            console.log('🚀 window.Android.restartApp() EXECUTADO COM SUCESSO!');
                        }
                    } catch (error) {
                        console.error('❌ Método 2 falhou:', error);
                    }
                }
                
                // Método 3: AndroidInterface.restartApp()
                if (!restartExecuted) {
                    try {
                        if (typeof AndroidInterface !== 'undefined' && AndroidInterface.restartApp) {
                            console.log('✅ Método 3: AndroidInterface.restartApp() encontrado!');
                            AndroidInterface.restartApp();
                            restartExecuted = true;
                            console.log('🚀 AndroidInterface.restartApp() EXECUTADO COM SUCESSO!');
                        }
                    } catch (error) {
                        console.error('❌ Método 3 falhou:', error);
                    }
                }
                
                // Método 4: Simular clique em botão (se existir)
                if (!restartExecuted) {
                    try {
                        const restartBtn = document.querySelector('[onclick*="Android.restartApp"]');
                        if (restartBtn) {
                            console.log('✅ Método 4: Botão restart encontrado, clicando...');
                            restartBtn.click();
                            restartExecuted = true;
                            console.log('🚀 Botão restart CLICADO COM SUCESSO!');
                        }
                    } catch (error) {
                        console.error('❌ Método 4 falhou:', error);
                    }
                }
                
                // Método 5: Criar e clicar botão temporário
                if (!restartExecuted) {
                    try {
                        console.log('✅ Método 5: Criando botão temporário...');
                        const tempBtn = document.createElement('button');
                        tempBtn.onclick = () => Android.restartApp();
                        tempBtn.style.display = 'none';
                        document.body.appendChild(tempBtn);
                        tempBtn.click();
                        document.body.removeChild(tempBtn);
                        restartExecuted = true;
                        console.log('🚀 Botão temporário EXECUTADO COM SUCESSO!');
                    } catch (error) {
                        console.error('❌ Método 5 falhou:', error);
                    }
                }
                
                if (!restartExecuted) {
                    console.error('❌ NENHUM método de restart funcionou!');
                    console.log('🔍 Variáveis disponíveis:');
                    console.log('- Android:', typeof Android);
                    console.log('- window.Android:', typeof window.Android);
                    console.log('- AndroidInterface:', typeof AndroidInterface);
                    
                    showToast('Erro: Função de restart não encontrada. Reinicie manualmente.', 'error');
                } else {
                    console.log('🎉 RESTART EXECUTADO COM SUCESSO!');
                }
                
                // Loading screen sempre
                setTimeout(() => {
                    loadingScreen.classList.remove('hidden');
                }, 500);
                
            } catch (error) {
                setLoading(btn, false);
                console.error('Registration error:', error);
                const errorMessage = getFirebaseErrorMessage(error.code);
                showToast(errorMessage, 'error');
            }
        });

        // Auth state observer - Controle único de chamadas Android
        onAuthStateChanged(auth, (user) => {
            if (user) {
                console.log('👤 Usuário autenticado no Kuia+:', user.email);
                console.log('📸 Foto do perfil:', user.photoURL);
                console.log('👤 Nome do usuário:', user.displayName);
                
                // MELHORIA 2: Salvar dados do usuário logado no localStorage para acesso rápido
                if (user.displayName || user.photoURL) {
                    const currentUserData = {
                        name: user.displayName,
                        displayName: user.displayName,
                        avatar: user.photoURL,
                        photoURL: user.photoURL,
                        email: user.email,
                        uid: user.uid,
                        lastLogin: new Date().toISOString(),
                        platform: 'kuia-plus'
                    };
                    
                    localStorage.setItem('kuia_userProfile', JSON.stringify(currentUserData));
                    console.log('✅ Perfil do usuário atualizado no localStorage:', currentUserData);
                }
                
                // Comunicar com Android que há conta ativa (UMA VEZ)
                if (!acaoBotaoCalled) {
                    try {
                        if (typeof AndroidBridge7 !== 'undefined' && AndroidBridge7.acaoBotao) {
                            AndroidBridge7.acaoBotao();
                            acaoBotaoCalled = true;
                            console.log('✅ AndroidBridge7.acaoBotao() chamado - conta ativa detectada');
                        }
                    } catch (error) {
                        console.warn('⚠️ AndroidBridge7.acaoBotao() não disponível:', error);
                    }
                }
            } else {
                console.log('👤 Nenhuma conta ativa detectada');
                isRedirecting = false;
                
                // Comunicar com Android que não há conta ativa (UMA VEZ)
                if (!resetLoginCalled) {
                    try {
                        if (typeof AndroidBridge7 !== 'undefined' && AndroidBridge7.resetLogin) {
                            AndroidBridge7.resetLogin();
                            resetLoginCalled = true;
                            console.log('✅ AndroidBridge7.resetLogin() chamado - nenhuma conta ativa');
                        }
                    } catch (error) {
                        console.warn('⚠️ AndroidBridge7.resetLogin() não disponível:', error);
                    }
                }
            }
        });

        // Ripple effect
        document.querySelectorAll("button.submit-btn").forEach(btn => {
            btn.addEventListener("click", (e) => {
                const circle = document.createElement("span");
                circle.classList.add("ripple");
                const d = Math.max(btn.clientWidth, btn.clientHeight);
                circle.style.width = circle.style.height = d + "px";
                const rect = btn.getBoundingClientRect();
                circle.style.left = e.clientX - rect.left - d / 2 + "px";
                circle.style.top = e.clientY - rect.top - d / 2 + "px";
                btn.appendChild(circle);
                circle.addEventListener("animationend", () => circle.remove());
            });
        });

        // Initialize app
        console.log('🚀 Inicializando Kuia+ App...');
        initApp();
    </script>
    <script>
  const btnAbrir = document.getElementById('btn-termos-kuia');
  const overlay = document.getElementById('overlay-termos-kuia');
  const btnFechar = document.getElementById('fechar-termos-kuia');

  if (btnAbrir) {
    btnAbrir.addEventListener('click', () => {
      overlay.style.display = 'flex';
    });
  }

  btnFechar.addEventListener('click', () => {
    overlay.style.display = 'none';
  });

  overlay.addEventListener('click', (e) => {
    if (e.target === overlay) {
      overlay.style.display = 'none';
    }
  });
</script>
    <script>
  document.getElementById('termsBtn').onclick = function() {
    window.open('termos.html', '_blank'); // abre em nova aba
    // ou usar window.location.href = 'termos.html'; para abrir na mesma aba
  }
</script>
    <script>
  const continueBtn = document.getElementById('continueBtn');
  const termsBtn = document.getElementById('termsBtn');

  // Ao carregar, verifica se já aceitou antes
  if (localStorage.getItem('termsAccepted') === 'true') {
    continueBtn.disabled = false;
  } else {
    continueBtn.disabled = true;
  }

  // Ao clicar nos Termos e Condições
  termsBtn.addEventListener('click', () => {
    // Aqui você pode abrir um modal ou redirecionar para a página de termos
    // Exemplo: abrir em nova aba
    window.open('termos.html', '_blank');

    // Marca como aceito no localStorage
    localStorage.setItem('termsAccepted', 'true');

    // Libera o botão imediatamente
    continueBtn.disabled = false;
  });

  // Ação do botão continuar
  continueBtn.addEventListener('click', () => {
    if (!continueBtn.disabled) {
      // Coloque aqui a ação de continuar
      window.location.href = '#'; // exemplo
    }
  });
</script>
    <script>
document.getElementById("termsBtn").addEventListener("click", function() {
  window.location.href = "termos.html"; 
  // ou, para abrir em nova aba:
  // window.open("termos.html", "_blank");
});
</script>
</body>
</html>